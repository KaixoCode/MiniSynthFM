<module name="Synth" var-name="Synth" interface="normal">

  <!-- ================================================ -->

  <param name="Pitch Bend Parameter"
         default="0.5"
         interface="$self.params.pitchBend = $value"/>
  
  <!-- ================================================ -->

  <module name="Operator" short-name="Op" var-name="oscillator" count="3">
    <param name="Volume"
           description="Operator volume."
           default="0"
           transform="Decibel[0.f, 1.9952623149688795f]"
           format="Decibels"
           interface="$self.params.volume[$oscillator] = $value * 2">
      <index if="$oscillator=1" default="-INFINITY"/>
      <index if="$oscillator=2" default="-INFINITY"/>
    </param>

    <param name="Tune"
           description="Operator tune."
           default="0"
           transform="Range[-12.f, 12.f]"
           format="Pitch"
           interface="$self.params.oscillator[$oscillator].tune($value * 24 - 12)"/>

    <param name="Octave"
           default="2" 
           steps="5"
           transform="Group[5]"
           format="Group[-2, -1, 0, 1, 2]"
           interface="$self.params.oscillator[$oscillator].octave(normalToIndex($value, 5) - 2)"/>
    
    <param name="Wave"
           default="0" 
           steps="4"
           transform="Group[4]"
           format="Group[Sine, Triangle, Saw, Square]"
           interface="$self.params.oscillator[$oscillator].waveform($value)"/>
    
    <param name="FM" var-name="fm"
           description="Operator FM."
           default="0"
           transform="Range[0.f, 100.f]"
           format="Percent"
           interface="$self.params.fm[$oscillator] = $value * 4">
      <index if="$oscillator=0" name="FM -> Op 3"></index>
      <index if="$oscillator=1" name="FM -> Op 1"></index>
      <index if="$oscillator=2" name="FM -> Op 2"></index>
    </param>
      
  </module>

  <!-- ================================================ -->

  <param name="Voices" 
         default="8" 
         steps="8" 
         transform="Integer[1, 8]"
         format="Integer"/>

  <param name="Legato" 
         default="1" 
         steps="2" 
         transform="Group[2]" 
         format="Group[Off, On]"/>

  <!-- ================================================ -->

  <module name="Lfo" count="2">
    <param name="Time"
           default="8000"
           transform="InvPower[128000.f, 1.f, 4.f]"
           format="Time"/>

    <param name="Tempo"
           default="0.5"
           steps="13"
           transform="Group[13]"
           format="Group[Freeze, 32/1, 16/1, 8/1, 4/1, 2/1, 1/1, 1/2, 1/4, 1/8, 1/16, 1/32, 1/64]"/>

    <param name="Synced"
           default="0"
           steps="2"
           transform="Group[2]"
           format="Group[Off, On]"/>

    <param name="Depth"
           default="100"
           transform="Range[0.f, 100.f]"
           format="Percent"/>
  </module>

  <!-- ================================================ -->

  <module name="Envelope" short-name="Env" count="2">
    <param name="Loop"
           default="0"
           transform="Group[2]"
           format="Group[Off, On]"/>

    <param name="Level"
           default="100"
           transform="Range[0.f, 100.f]"
           format="Percent"
           interface="$self.params.envelopeLevel[$envelope] = $value"/>

    <param name="Attack"
           default="1"
           transform="Power[1.f, 5000.f, 2.f]"
           format="Time"
           interface="$self.params.envelope[$envelope].attack($value * $value * 4999 + 1)"/>

    <param name="Decay"
           default="200"
           transform="Power[1.f, 5000.f, 2.f]"
           format="Time"
           interface="$self.params.envelope[$envelope].decay($value * $value * 4999 + 1)"/>

    <param name="Sustain"
           default="100"
           transform="Range[0.f, 100.f]"
           format="Percent"
           interface="$self.params.envelope[$envelope].sustain($value)"/>

    <param name="Release"
           default="60"
           transform="Power[1.f, 5000.f, 2.f]"
           format="Time"
           interface="$self.params.envelope[$envelope].release($value * $value * 4999 + 1)"/>
  </module>

  <!-- ================================================ -->

  <module name="Filter">
    <param name="Frequency"
           short-name="Freq"
           default="16000"
           transform="Log[60.f, 16000.f]"
           format="Frequency"
           interface="$self.params.filter.frequency = $value"/>
    
    <param name="Resonance"
           short-name="Reso"
           default="0"
           transform="Range[0.f, 100.f]"
           format="Percent"
           interface="$self.params.filter.resonance = $value"/>

    <param name="Drive"
           default="0"
           transform="Range[0.f, 100.f]"
           format="Percent"
           interface="$self.params.filter.drive = $value"/>
  </module>
  
  <!-- ================================================ -->

</module>